
# Application Name & Server Port
spring.application.name=om_pay
server.port=${PORT:8083}

# Database Configuration (use environment variables)
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://localhost:5432/om_pay_db}
spring.datasource.username=${DATABASE_USERNAME:postgres}
spring.datasource.password=${DATABASE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect


# JPA/Hibernate Configuration
# create-drop: Drop and recreate database on each restart (for testing)
spring.jpa.hibernate.ddl-auto=create-drop

spring.jpa.show-sql=${JPA_SHOW_SQL:true}

spring.jpa.properties.hibernate.format_sql=true

# Afficher les paramètres SQL
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Désactiver le open-in-view (bonne pratique)
spring.jpa.open-in-view=false

# ==============================================
# JWT CONFIGURATION
# ==============================================

# Clé secrète JWT (À CHANGER en production)
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION:86400000}

# ==============================================
# EMAIL CONFIGURATION (BREVO API)
# ==============================================

# Configuration Brevo (ex-Sendinblue)
brevo.api.key=${BREVO_API_KEY}
brevo.api.url=https://api.brevo.com/v3/smtp/email

# Email expéditeur
mail.from.address=${MAIL_FROM_ADDRESS:noreply@example.com}
mail.from.name=${MAIL_FROM_NAME:OM Pay}

# Durée de validité du code secret (en minutes)
code.secret.expiration=${CODE_SECRET_EXPIRATION:30}

# ==============================================
# MESSAGES D'ERREUR PERSONNALISÉS
# ==============================================

spring.messages.basename=messages/error-messages
spring.messages.encoding=UTF-8


# Format de date JSON
spring.jackson.date-format=yyyy-MM-dd'T'HH:mm:ss
spring.jackson.time-zone=Africa/Dakar

# Ne pas inclure les propriétés null dans le JSON
spring.jackson.default-property-inclusion=non_null

# Niveau de log général
logging.level.root=INFO

# Niveau de log pour votre application
logging.level.om.example.om_pay=DEBUG

# Niveau de log pour Spring Security (utile pour debug)
logging.level.org.springframework.security=DEBUG

# Fichier de log
logging.file.name=logs/om_pay.log
logging.logback.rollingpolicy.max-file-size=10MB
logging.logback.rollingpolicy.max-history=30

# ==============================================
# BUSINESS CONFIGURATION (ORANGE MONEY)
# ==============================================

# Note: Les plafonds sont gérés dans le code (hardcodé dans les entités)

# ==============================================
# PROFILS D'ENVIRONNEMENT
# ==============================================

# Profil actif (dev, test, prod)
# Pour changer : ./mvnw spring-boot:run -Dspring-boot.run.profiles=prod
spring.profiles.active=dev

# ==============================================
# SWAGGER/OPENAPI CONFIGURATION
# ==============================================

# Activer/Désactiver Swagger UI
springdoc.api-docs.enabled=${SWAGGER_ENABLED:true}
springdoc.swagger-ui.enabled=${SWAGGER_ENABLED:true}
springdoc.api-docs.path=/v3/api-docs

# Interface Swagger UI
springdoc.swagger-ui.path=/swagger-ui.html

# Options d'affichage et d'organisation
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.displayRequestDuration=true
springdoc.swagger-ui.defaultModelsExpandDepth=1
springdoc.swagger-ui.defaultModelExpandDepth=3
springdoc.swagger-ui.tryItOutEnabled=true

# Configuration des serveurs (utilisé dans SwaggerConfig.java)
swagger.server.prod.url=${SWAGGER_SERVER_PROD_URL:https://om-pay-spring-boot-1.onrender.com}
swagger.server.local.url=${SWAGGER_SERVER_LOCAL_URL:http://localhost:8083}

# Actuator Configuration (Health Check for Render)
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always

